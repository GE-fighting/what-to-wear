# ä»Šå¤©ç©¿ä»€ä¹ˆ (What to Wear) é¡¹ç›®æ–‡æ¡£

## ğŸ“– é¡¹ç›®æ¦‚è¿°

"ä»Šå¤©ç©¿ä»€ä¹ˆ"æ˜¯ä¸€ä¸ªåŸºäºå¤©æ°”æ•°æ®çš„æ™ºèƒ½ç©¿è¡£å»ºè®®æ¡Œé¢åº”ç”¨ï¼Œå¸®åŠ©ç”¨æˆ·æ ¹æ®å½“å¤©å¤©æ°”æƒ…å†µé€‰æ‹©åˆé€‚çš„æœè£…æ­é…ã€‚

### æŠ€æœ¯æ ˆ
- **å‰ç«¯**: React + TypeScript + Tauri (æ¡Œé¢åº”ç”¨)
- **åç«¯**: Go + Gin + GORM + PostgreSQL
- **è®¤è¯**: JWT Token
- **æ•°æ®åº“**: PostgreSQL
- **å¼€å‘å·¥å…·**: Vite, pnpm

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

### æ··åˆæ¶æ„è®¾è®¡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Tauri å‰ç«¯                â”‚
â”‚         (React + TS)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
        â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
        â”‚           â”‚
        â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    GORM     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Rust åç«¯   â”‚ â”‚ Go åç«¯æœåŠ¡å™¨â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚   PostgreSQL    â”‚
â”‚ (æœ¬åœ°åŠŸèƒ½)  â”‚ â”‚ (ç½‘ç»œ API)  â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚     æ•°æ®åº“      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¶æ„åˆ†å·¥
- **Go åç«¯**: å¤„ç†ç½‘ç»œ APIã€æ•°æ®åº“æ“ä½œã€ç”¨æˆ·è®¤è¯ã€ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ
- **Rust åç«¯**: å¤„ç†æœ¬åœ°æ–‡ä»¶æ“ä½œã€ç³»ç»Ÿé›†æˆã€æ€§èƒ½è®¡ç®—ã€ç¦»çº¿åŠŸèƒ½
- **å‰ç«¯**: ç”¨æˆ·ç•Œé¢ã€çŠ¶æ€ç®¡ç†ã€ç”¨æˆ·äº¤äº’

## ğŸ“ é¡¹ç›®ç»“æ„

```
what-to-wear/
â”œâ”€â”€ server/                          # Go åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ config/                      # é…ç½®æ¨¡å—
â”‚   â”‚   â””â”€â”€ database.go              # æ•°æ®åº“è¿æ¥é…ç½®
â”‚   â”œâ”€â”€ controllers/                 # æ§åˆ¶å™¨å±‚
â”‚   â”‚   â””â”€â”€ auth.go                  # è®¤è¯æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ middleware/                  # ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ auth.go                  # JWT è®¤è¯ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ models/                      # æ•°æ®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ user.go                  # ç”¨æˆ·æ¨¡å‹
â”‚   â”œâ”€â”€ routes/                      # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ routes.go                # ä¸»è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ auth_routes.go           # è®¤è¯è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ public_routes.go         # å…¬å¼€è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ user_routes.go           # ç”¨æˆ·è·¯ç”±
â”‚   â”‚   â””â”€â”€ weather_routes.go        # å¤©æ°”è·¯ç”±
â”‚   â”œâ”€â”€ utils/                       # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ jwt.go                   # JWT å·¥å…·
â”‚   â”‚   â””â”€â”€ password.go              # å¯†ç åŠ å¯†å·¥å…·
â”‚   â”œâ”€â”€ .env                         # ç¯å¢ƒå˜é‡é…ç½®
â”‚   â”œâ”€â”€ go.mod                       # Go æ¨¡å—ä¾èµ–
â”‚   â”œâ”€â”€ go.sum                       # ä¾èµ–ç‰ˆæœ¬é”å®š
â”‚   â””â”€â”€ main.go                      # åº”ç”¨å…¥å£
â”œâ”€â”€ client/what-to-wear-client/      # Tauri å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/                         # React æºç 
â”‚   â”‚   â”œâ”€â”€ AuthPage.tsx             # è®¤è¯é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ App.tsx                  # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ App.css                  # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ main.tsx                 # React å…¥å£
â”‚   â”œâ”€â”€ src-tauri/                   # Tauri é…ç½®
â”‚   â”‚   â”œâ”€â”€ src/                     # Rust æºç 
â”‚   â”‚   â”‚   â”œâ”€â”€ lib.rs               # Rust ä¸»åº“æ–‡ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ main.rs              # Rust å…¥å£æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ Cargo.toml               # Rust ä¾èµ–é…ç½®
â”‚   â”‚   â””â”€â”€ tauri.conf.json          # Tauri åº”ç”¨é…ç½®
â”‚   â”œâ”€â”€ package.json                 # Node.js ä¾èµ–
â”‚   â”œâ”€â”€ pnpm-lock.yaml              # ä¾èµ–ç‰ˆæœ¬é”å®š
â”‚   â””â”€â”€ vite.config.ts               # Vite æ„å»ºé…ç½®
â”œâ”€â”€ test.html                        # API æµ‹è¯•é¡µé¢
â”œâ”€â”€ test.json                        # æµ‹è¯•æ•°æ®
â””â”€â”€ claude.md                        # é¡¹ç›®æ–‡æ¡£ (æœ¬æ–‡ä»¶)
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Go 1.23+
- Node.js 18+
- pnpm
- Rust (ç”¨äº Tauri)
- PostgreSQL

### 1. å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd what-to-wear
```

### 2. å¯åŠ¨åç«¯æœåŠ¡

```bash
# è¿›å…¥åç«¯ç›®å½•
cd server

# å®‰è£…ä¾èµ–
go mod tidy

# é…ç½®ç¯å¢ƒå˜é‡ (ç¼–è¾‘ .env æ–‡ä»¶)
# DB_HOST=localhost
# DB_PORT=5432
# DB_USER=your_username
# DB_PASSWORD=your_password
# DB_NAME=what_to_wear
# DB_SSLMODE=disable
# JWT_SECRET=your_jwt_secret

# å¯åŠ¨æœåŠ¡
go run main.go
```

### 3. å¯åŠ¨å‰ç«¯åº”ç”¨

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd client/what-to-wear-client

# å®‰è£…ä¾èµ–
pnpm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm tauri dev
```

## ğŸ“¡ API æ¥å£æ–‡æ¡£

### åŸºç¡€ä¿¡æ¯
- **Base URL**: `http://localhost:8080/api`
- **è®¤è¯æ–¹å¼**: Bearer Token (JWT)

### å…¬å¼€æ¥å£

#### å¥åº·æ£€æŸ¥
```http
GET /ping
```
**å“åº”ç¤ºä¾‹**:
```json
{
  "message": "pong from go server!"
}
```

#### ç”¨æˆ·æ³¨å†Œ
```http
POST /auth/register
Content-Type: application/json

{
  "username": "string (3-20å­—ç¬¦)",
  "password": "string (æœ€å°‘6å­—ç¬¦)"
}
```

#### ç”¨æˆ·ç™»å½•
```http
POST /auth/login
Content-Type: application/json

{
  "username": "string",
  "password": "string"
}
```
**å“åº”ç¤ºä¾‹**:
```json
{
  "message": "Login successful",
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

### éœ€è¦è®¤è¯çš„æ¥å£

#### è·å–ç”¨æˆ·èµ„æ–™
```http
GET /user/profile
Authorization: Bearer <token>
```

#### è·å–å½“å‰å¤©æ°”
```http
GET /weather/current
Authorization: Bearer <token>
```

#### è·å–å¤©æ°”é¢„æŠ¥
```http
GET /weather/forecast
Authorization: Bearer <token>
```

## ğŸ¦€ Tauri Rust åç«¯åŠŸèƒ½

### é€‚ç”¨åœºæ™¯

#### 1. ç³»ç»Ÿçº§æ“ä½œ
- **æ–‡ä»¶ç³»ç»Ÿè®¿é—®**: ä¿å­˜ç”¨æˆ·ç©¿æ­ç…§ç‰‡ã€è¯»å–æœ¬åœ°é…ç½®
- **ç³»ç»Ÿé€šçŸ¥**: å¤©æ°”å˜åŒ–æé†’ã€ç©¿è¡£å»ºè®®æ¨é€
- **ç³»ç»Ÿæ‰˜ç›˜**: æ˜¾ç¤ºå½“å‰å¤©æ°”ã€å¿«é€Ÿè®¿é—®åŠŸèƒ½

#### 2. ç¡¬ä»¶è®¿é—®
- **æ‘„åƒå¤´è°ƒç”¨**: æ‹æ‘„ä»Šæ—¥ç©¿æ­è®°å½•
- **ä½ç½®æœåŠ¡**: è·å–æœ¬åœ°å¤©æ°”æ•°æ®
- **ä¼ æ„Ÿå™¨æ•°æ®**: ç¯å¢ƒæ¸©åº¦ã€æ¹¿åº¦æ£€æµ‹

#### 3. æ€§èƒ½æ•æ„Ÿè®¡ç®—
- **å›¾åƒå¤„ç†**: åˆ†æè¡£æœé¢œè‰²æ­é…ã€é£æ ¼è¯†åˆ«
- **ç®—æ³•è®¡ç®—**: é«˜æ€§èƒ½ç©¿æ­ç»„åˆç”Ÿæˆ
- **æ•°æ®åˆ†æ**: ç”¨æˆ·ç©¿è¡£ä¹ æƒ¯æ¨¡å¼åˆ†æ

#### 4. ç¦»çº¿åŠŸèƒ½
- **æœ¬åœ°ç¼“å­˜**: å¤©æ°”æ•°æ®ã€ç©¿æ­å»ºè®®ç¼“å­˜
- **ç¦»çº¿æ¨è**: åŸºäºå†å²æ•°æ®çš„ç¦»çº¿å»ºè®®
- **æ•°æ®åŒæ­¥**: ç¦»çº¿æ•°æ®ä¸äº‘ç«¯åŒæ­¥

### ç¤ºä¾‹ Tauri å‘½ä»¤

```rust
// ä¿å­˜ç©¿æ­è®°å½•
#[tauri::command]
async fn save_daily_outfit(
    photo: Vec<u8>,
    weather: WeatherData,
    rating: u8
) -> Result<(), String> {
    // ä¿å­˜åˆ°æœ¬åœ°æ•°æ®åº“
    let local_db = get_local_database()?;
    local_db.save_outfit_record(photo, weather, rating)?;
    Ok(())
}

// ç³»ç»Ÿé€šçŸ¥
#[tauri::command]
async fn send_weather_notification(message: String) -> Result<(), String> {
    // å‘é€ç³»ç»Ÿçº§é€šçŸ¥
    show_notification(&message).await?;
    Ok(())
}

// å¿«é€Ÿå»ºè®®
#[tauri::command]
async fn get_quick_recommendation() -> Result<QuickOutfit, String> {
    // åŸºäºç¼“å­˜æ•°æ®å¿«é€Ÿç”Ÿæˆå»ºè®®
    let cached_weather = get_cached_weather()?;
    let outfit = generate_quick_suggestion(cached_weather)?;
    Ok(outfit)
}
```

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### ç”¨æˆ·è¡¨ (users)
```sql
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„ Go API æ¥å£

1. **åˆ›å»ºæ§åˆ¶å™¨æ–¹æ³•** (åœ¨ `controllers/` ç›®å½•)
2. **æ·»åŠ è·¯ç”±é…ç½®** (åœ¨ `routes/` ç›®å½•)
3. **åœ¨ä¸»è·¯ç”±æ–‡ä»¶ä¸­æ³¨å†Œ** (`routes/routes.go`)

### æ·»åŠ æ–°çš„ Tauri å‘½ä»¤

1. **åœ¨ `src-tauri/src/lib.rs` ä¸­å®šä¹‰å‘½ä»¤**:
```rust
#[tauri::command]
async fn your_command(param: String) -> Result<String, String> {
    // å®ç°é€»è¾‘
    Ok("success".to_string())
}
```

2. **æ³¨å†Œå‘½ä»¤åˆ° Tauri**:
```rust
pub fn run() {
    tauri::Builder::default()
        .invoke_handler(tauri::generate_handler![your_command])
        .run(tauri::generate_context!())
        .expect("error while running tauri application");
}
```

3. **åœ¨å‰ç«¯è°ƒç”¨**:
```typescript
import { invoke } from '@tauri-apps/api/core';

const result = await invoke('your_command', { param: 'value' });
```

### æ·»åŠ æ–°çš„å‰ç«¯é¡µé¢

1. **åˆ›å»º React ç»„ä»¶** (åœ¨ `src/` ç›®å½•)
2. **æ·»åŠ è·¯ç”±é…ç½®** (å¦‚æœéœ€è¦)
3. **åœ¨ä¸»åº”ç”¨ä¸­å¼•å…¥**

### åŠŸèƒ½å¼€å‘å»ºè®®

#### é€‰æ‹© Go åç«¯çš„åœºæ™¯:
- ç½‘ç»œ API è°ƒç”¨ (å¤©æ°”æœåŠ¡ã€ç¬¬ä¸‰æ–¹ API)
- æ•°æ®åº“æ“ä½œ (ç”¨æˆ·æ•°æ®ã€å†å²è®°å½•)
- ç”¨æˆ·è®¤è¯å’Œæˆæƒ
- å¤æ‚çš„ä¸šåŠ¡é€»è¾‘å¤„ç†

#### é€‰æ‹© Rust åç«¯çš„åœºæ™¯:
- æ–‡ä»¶ç³»ç»Ÿæ“ä½œ (ä¿å­˜å›¾ç‰‡ã€é…ç½®æ–‡ä»¶)
- ç³»ç»Ÿé›†æˆ (é€šçŸ¥ã€æ‰˜ç›˜ã€è‡ªå¯åŠ¨)
- æ€§èƒ½æ•æ„Ÿè®¡ç®— (å›¾åƒå¤„ç†ã€ç®—æ³•)
- ç¦»çº¿åŠŸèƒ½ (æœ¬åœ°ç¼“å­˜ã€ç¦»çº¿æ¨è)

### ç¯å¢ƒå˜é‡é…ç½®

åç«¯ç¯å¢ƒå˜é‡ (`.env`):
```env
# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_PORT=5432
DB_USER=your_username
DB_PASSWORD=your_password
DB_NAME=what_to_wear
DB_SSLMODE=disable

# JWT é…ç½®
JWT_SECRET=your_secret_key
```

## ğŸ§ª æµ‹è¯•

### API æµ‹è¯•
ä½¿ç”¨æä¾›çš„ `test.html` æ–‡ä»¶è¿›è¡Œ API æµ‹è¯•ï¼Œæˆ–ä½¿ç”¨ Postman/curl ç­‰å·¥å…·ã€‚

### å‰ç«¯æµ‹è¯•
åœ¨ Tauri åº”ç”¨ä¸­ç›´æ¥æµ‹è¯•ç”¨æˆ·ç•Œé¢åŠŸèƒ½ã€‚

## ğŸ“¦ éƒ¨ç½²

### åç«¯éƒ¨ç½²
```bash
# æ„å»ºå¯æ‰§è¡Œæ–‡ä»¶
go build -o what-to-wear-server main.go

# è¿è¡Œ
./what-to-wear-server
```

### å‰ç«¯éƒ¨ç½²
```bash
# æ„å»º Tauri åº”ç”¨
pnpm tauri build
```

## ğŸ”® æœªæ¥è®¡åˆ’

### æ ¸å¿ƒåŠŸèƒ½
- [ ] é›†æˆçœŸå®å¤©æ°” API (Go åç«¯)
- [ ] å®ç°ç©¿è¡£å»ºè®®ç®—æ³• (Rust åç«¯ - æ€§èƒ½ä¼˜åŒ–)
- [ ] æ·»åŠ ç”¨æˆ·åå¥½è®¾ç½® (æ··åˆå®ç°)
- [ ] å®ç°å†å²è®°å½•åŠŸèƒ½ (Go åç«¯ + æœ¬åœ°ç¼“å­˜)

### Tauri åŸç”ŸåŠŸèƒ½
- [ ] ç©¿æ­ç…§ç‰‡æ‹æ‘„å’Œç®¡ç† (Rust åç«¯)
- [ ] ç³»ç»Ÿæ‰˜ç›˜å¤©æ°”æ˜¾ç¤º (Rust åç«¯)
- [ ] å¼€æœºè‡ªå¯åŠ¨å’Œå®šæ—¶æé†’ (Rust åç«¯)
- [ ] æœ¬åœ°æ•°æ®åŠ å¯†å­˜å‚¨ (Rust åç«¯)
- [ ] ç¦»çº¿æ¨¡å¼æ”¯æŒ (Rust åç«¯)

### ç”¨æˆ·ä½“éªŒ
- [ ] æœè£…æ­é…æ¨è (Go åç«¯ + AI)
- [ ] æ™ºèƒ½é¢œè‰²æ­é…åˆ†æ (Rust åç«¯ - å›¾åƒå¤„ç†)
- [ ] ä¸ªæ€§åŒ–ç©¿è¡£ä¹ æƒ¯åˆ†æ (Rust åç«¯ - æ•°æ®åˆ†æ)
- [ ] æ”¯æŒå¤šè¯­è¨€ (å‰ç«¯)
- [ ] æ·»åŠ ä¸»é¢˜åˆ‡æ¢ (å‰ç«¯)

### é«˜çº§åŠŸèƒ½
- [ ] è¯­éŸ³ç©¿è¡£å»ºè®® (Rust åç«¯ - ç³»ç»Ÿ TTS)
- [ ] å¤©æ°”å˜åŒ–æ™ºèƒ½æé†’ (Rust åç«¯ - ç³»ç»Ÿé€šçŸ¥)
- [ ] ç©¿æ­ç¤¾äº¤åˆ†äº«åŠŸèƒ½ (Go åç«¯)
- [ ] æœè£…è´­ä¹°å»ºè®®é›†æˆ (Go åç«¯)

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. æ¨é€åˆ°åˆ†æ”¯
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

[MIT License](LICENSE)

---

**å¼€å‘æ—¶é—´**: 2025å¹´8æœˆ
**æŠ€æœ¯æ”¯æŒ**: Claude AI Assistant
